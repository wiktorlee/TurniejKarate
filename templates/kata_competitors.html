{% extends "base.html" %}
{% block content %}
<h1>Lista zawodników - Kata</h1>

<div class="card">
  <h2 style="margin-top: 0;">{{ event_name }}</h2>
  <p><b>Kategoria:</b> {{ category_name }}</p>
  {% if start_date or end_date %}
    <p><b>Termin:</b> 
      {% if start_date and end_date %}
        {{ start_date.strftime('%d.%m.%Y') }} - {{ end_date.strftime('%d.%m.%Y') }}
      {% elif start_date %}
        {{ start_date.strftime('%d.%m.%Y') }}
      {% endif %}
    </p>
  {% endif %}
  
  <p style="margin-top: 16px;"><b>Liczba zawodników:</b> {{ competitors|length }}</p>
  
  {% if competitors %}
    <table style="width: 100%; margin-top: 16px; border-collapse: collapse;">
      <thead>
        <tr style="background: #f5f5f5; border-bottom: 2px solid #ddd;">
          <th style="padding: 8px; text-align: left;">Kod</th>
          <th style="padding: 8px; text-align: left;">Imię i nazwisko</th>
          <th style="padding: 8px; text-align: left;">Kraj</th>
          <th style="padding: 8px; text-align: left;">Klub</th>
          <th style="padding: 8px; text-align: left;">Narodowość</th>
        </tr>
      </thead>
      <tbody>
        {% for comp in competitors %}
          <tr style="border-bottom: 1px solid #eee; {% if comp.is_current_user %}background: #e6f4ea;{% endif %}">
            <td style="padding: 8px;"><b>{{ comp.athlete_code }}</b>{% if comp.is_current_user %} <small>(Ty)</small>{% endif %}</td>
            <td style="padding: 8px;">{{ comp.first_name }} {{ comp.last_name }}</td>
            <td style="padding: 8px;">{{ comp.country_code }}</td>
            <td style="padding: 8px;">{{ comp.club_name or '-' }}</td>
            <td style="padding: 8px;">{{ comp.nationality or '-' }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p style="margin-top: 16px; color: #666;">Brak zawodników w tej kategorii.</p>
  {% endif %}
  
  <div style="margin-top: 20px;">
    <a href="{{ url_for('registration.my_registration') }}" style="color: #0a58ca; text-decoration: none;">← Powrót do moich zgłoszeń</a>
  </div>
</div>
{% endblock %}


